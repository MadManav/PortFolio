import React, { useEffect, useRef } from "react";

const Loader = () => {
  const pathRef = useRef(null);
  
  useEffect(() => {
    if (pathRef.current) {
      const pathLength = pathRef.current.getTotalLength();
      console.log("Path length:", pathLength);
      
      // Set the values dynamically based on actual path length
      pathRef.current.style.strokeDasharray = pathLength;
      pathRef.current.style.strokeDashoffset = pathLength;
    }
  }, []);

  return (
    <div className="loader-container">
      <div className="loader">
        <svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
          <path
            ref={pathRef}
            className="m-path"
            d="M 39.2975 22.825L 39.2975 22.825Q 38.864375 29.321875 38.864375 31.425625L 38.864375 31.425625Q 38.864375 37.736875 39.17375 39.655L 39.17375 39.655L 39.42125 41.325625L 47.34125 20.72125Q 52.53875 23.753125 59.0975 25.0525L 59.0975 25.0525Q 58.85 30.559375 57.550625 37.4275Q 56.25125 44.295625 55.075625 48.379375L 55.075625 48.379375L 53.9 52.463125Q 50.620625 54.62875 43.319375 55.680625L 43.319375 55.680625Q 44.680625 50.91625 45.5159375 46.523125Q 46.35125 42.13 46.536875 40.15L 46.536875 40.15L 46.660625 38.108125Q 46.041875 39.4075 45.0209375 41.449375Q 44 43.49125 41.2465625 47.7915625Q 38.493125 52.091875 36.3275 53.948125L 36.3275 53.948125Q 35.151875 51.596875 34.285625 47.636875Q 33.419375 43.676875 33.11 40.8925L 33.11 40.8925L 32.800625 38.108125Q 32.429375 38.850625 31.8415625 40.27375Q 31.25375 41.696875 30.2946875 47.018125Q 29.335625 52.339375 29.335625 58.58875L 29.335625 58.58875Q 28.593125 58.2175 27.3865625 57.536875Q 26.18 56.85625 23.82875 54.814375Q 21.4775 52.7725 20.673125 50.7925L 20.673125 50.7925Q 21.23 44.295625 22.529375 38.3246875Q 23.82875 32.35375 24.880625 29.63125L 24.880625 29.63125L 25.870625 26.846875Q 28.345625 25.485625 32.2128125 24.2790625Q 36.08 23.0725 39.2975 22.825Z"
            fill="none"
            stroke="#fefeff"
            strokeWidth="1.5"
          />
        </svg>
      </div>
    </div>
  );
};

export default Loader;